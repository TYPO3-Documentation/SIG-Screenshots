<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Screenshots" />
<f:section name="Content">
    <h1>TYPO3 Screenshots :: Make</h1>
    <f:form method="post" action="make">
        <div class="row pt-2 pb-3">
            <div class="col-12 col-md-4" id="screenshotsPathContainer">
                <label for="screenshotsPath" class="form-label">Run screenshots.json of path</label>
                <f:form.select
                    id="screenshotsPath"
                    name="pathFilter"
                    options="{configurations}"
                    prependOptionLabel="All"
                    prependOptionValue=""
                    optionValueField="path"
                    optionLabelField="filePath"
                    value="{pathFilter}"
                    sortByOptionLabel="true"
                    class="form-select"
                />
            </div>
            <div class="col-12 col-md-4" id="screenshotsSuiteContainer">
                <label for="screenshotsSuite" class="form-label">Run actions of environment</label>
                <f:form.select
                    id="screenshotsSuite"
                    name="suiteFilter"
                    options="{Core: 'Core (TYPO3)', Introduction: 'Introduction (TYPO3 + EXT:introduction)', Styleguide: 'Styleguide (TYPO3 + EXT:styleguide)'}"
                    prependOptionLabel="All"
                    prependOptionValue=""
                    value="{suiteFilter}"
                    sortByOptionLabel="true"
                    class="form-select"
                />
            </div>
            <div class="col-12 col-md-4" id="screenshotsActionsIdContainer">
                <label for="screenshotsActionsId" class="form-label">Run actions of ID</label>
                <f:form.select
                    id="screenshotsActionsId"
                    name="actionsIdFilter"
                    options="{actionsIds}"
                    prependOptionLabel="All"
                    prependOptionValue=""
                    value="{actionsIdFilter}"
                    sortByOptionLabel="true"
                    class="form-select"
                />
            </div>
        </div>

        <div>
            <f:form.button name="cmd" value="make" type="submit" class="btn btn-warning">
                Make screenshots
            </f:form.button>
        </div>

        <h2>Results</h2>
        <f:if condition="{cmd} == 'show'">
            <f:then>
                <f:be.infobox state="-2">
                    Nothing done yet. Click button "Make screenshots" to start the runner.
                </f:be.infobox>
            </f:then>
            <f:else>
                <f:if condition="{messages}">
                    <f:render partial="Messages" arguments="{messages:messages}" />
                </f:if>
                <h2>Details</h2>
                <div>
                    <pre style="background-color: black;"><f:format.htmlentitiesDecode>{outputHtml}</f:format.htmlentitiesDecode></pre>
                </div>
                <div class="pt-3">
                    <f:form.button name="cmd" value="make" type="submit" class="btn btn-warning">
                        Make screenshots
                    </f:form.button>
                </div>
            </f:else>
        </f:if>
    </f:form>
</f:section>
</html>
